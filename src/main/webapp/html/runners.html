<!DOCTYPE html>
<html>
  <head>
    <title>Bibs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link href="../styles/bootstrap.min.css" rel="stylesheet">

    </head>
<body>

<div style="margin:12px;">
      
    <ul class="nav nav-tabs">
	  <li><a href="reader.html">Race day</a></li>
	  <li class="active"><a href="#">Runners</a></li>
	  <li><a href="awards.html">Awards</a></li>
	</ul>

	<div class="row" style="margin-top:12px;">
	  	<div class="col-md-4">
			<button type="button" class="btn btn-default" 
				style="margin:2px;">Import</button>
			<button type="button" class="btn btn-default" 
				style="margin:2px;">Export</button>
		</div>
	  	<div class="col-md-4">
			<button type="button" class="btn btn-default" 
				style="margin:2px;">Read Bibs</button>
			<span id="result-count" style="display:none;">
				<span id="result-count-output">0</span> Bibs processed.
			</span>
		</div>
	  	<div class="col-md-4">
			<form id="search-form" class="form" role="form">
			  <div class="form-group pull-left" style="width:200px;">
			    <label class="sr-only" for="query">Search</label>
			    <input type="text" class="form-control" id="query" placeholder="Type a Bib or Name">
			  </div>
			  <button type="submit" class="btn btn-default pull-left">Search</button>
			</form>
		</div>
	</div>
		
	<div id="results"
		style="margin:30px;display:none;"> 
		<table id="raceresults" class="table">
		<thead><tr>
			<th>Bib</th>	
			<th>Name</th>	
			<th>Hometown</th>	
			<th>Age</th>	
			<th>Gender</th>	
		</tr></thead>
		</table>
	</div>

</div>

<script src="../scripts/jquery-1.10.2.min.js"></script>
<script src="../scripts/bootstrap.min.js"></script>
    
<script>

$(document).ready(getRunners);

function getRunners(){
	readerOn=false;
	var request = $.ajax({
		url: "/bibs-server/raceresults/byevent/ice?page=1&size=50",
		type: "GET",
		dataType: "json"
		});
	request.done(function( data ) {
			var results = $('#raceresults').html();
			for(var i in data){
				results += "<tr>";
				results += "<td>"+data[i].bib+"</td>";
				results += "<td>"+data[i].firstname+" "+data[i].lastname+"</td>";
				results += "<td>"+data[i].city+", "+data[i].state+"</td>";
				results += "<td>"+data[i].age+"</td>";
				results += "<td>"+data[i].gender+"</td>";
				results += "</tr>";
			}
			$('#raceresults').html(results);
			$('#results').show(500);
		});
	request.fail(function( jqXHR, textStatus ) {
		alert( "Error: " + textStatus );
		});
	
}

</script>

  </body>
</html>
